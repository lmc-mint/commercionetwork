<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Updating a validator | Commercio.network Documentation</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/icon.png">
    <meta name="description" content="Documentation for the Commercio.network blockchain.">
    
    <link rel="preload" href="/assets/css/0.styles.a31c27c1.css" as="style"><link rel="preload" href="/assets/js/app.25897520.js" as="script"><link rel="preload" href="/assets/js/2.ac32ef9e.js" as="script"><link rel="preload" href="/assets/js/1.da52573b.js" as="script"><link rel="preload" href="/assets/js/99.d7dbcd46.js" as="script"><link rel="prefetch" href="/assets/js/10.8225404c.js"><link rel="prefetch" href="/assets/js/100.167014a9.js"><link rel="prefetch" href="/assets/js/101.3065d56d.js"><link rel="prefetch" href="/assets/js/102.27e5ed65.js"><link rel="prefetch" href="/assets/js/103.a1dd6497.js"><link rel="prefetch" href="/assets/js/104.8069582e.js"><link rel="prefetch" href="/assets/js/105.fef5cde4.js"><link rel="prefetch" href="/assets/js/106.b9afe399.js"><link rel="prefetch" href="/assets/js/107.37bce772.js"><link rel="prefetch" href="/assets/js/108.d1d6e5d1.js"><link rel="prefetch" href="/assets/js/109.73662b0f.js"><link rel="prefetch" href="/assets/js/11.b7d42d3c.js"><link rel="prefetch" href="/assets/js/110.c4888756.js"><link rel="prefetch" href="/assets/js/111.abbd096a.js"><link rel="prefetch" href="/assets/js/112.4e153d93.js"><link rel="prefetch" href="/assets/js/113.bfc46b3a.js"><link rel="prefetch" href="/assets/js/114.7288b92c.js"><link rel="prefetch" href="/assets/js/115.09ef338c.js"><link rel="prefetch" href="/assets/js/116.1f8bfded.js"><link rel="prefetch" href="/assets/js/117.be07720c.js"><link rel="prefetch" href="/assets/js/118.6f04dd1b.js"><link rel="prefetch" href="/assets/js/119.a8151902.js"><link rel="prefetch" href="/assets/js/12.63c1f64f.js"><link rel="prefetch" href="/assets/js/120.86479b3b.js"><link rel="prefetch" href="/assets/js/121.ff91cae0.js"><link rel="prefetch" href="/assets/js/122.f0bce998.js"><link rel="prefetch" href="/assets/js/123.9ce8c71b.js"><link rel="prefetch" href="/assets/js/124.1e91587a.js"><link rel="prefetch" href="/assets/js/125.d3886915.js"><link rel="prefetch" href="/assets/js/126.91771e3d.js"><link rel="prefetch" href="/assets/js/127.1db29e58.js"><link rel="prefetch" href="/assets/js/128.433043c8.js"><link rel="prefetch" href="/assets/js/129.e37001f4.js"><link rel="prefetch" href="/assets/js/13.aed2da28.js"><link rel="prefetch" href="/assets/js/130.23ba8a5e.js"><link rel="prefetch" href="/assets/js/131.017de9d5.js"><link rel="prefetch" href="/assets/js/132.bb40e4c1.js"><link rel="prefetch" href="/assets/js/133.f955cda5.js"><link rel="prefetch" href="/assets/js/134.c7c6bb5c.js"><link rel="prefetch" href="/assets/js/135.ab832ac0.js"><link rel="prefetch" href="/assets/js/136.9675ca32.js"><link rel="prefetch" href="/assets/js/137.d45e629a.js"><link rel="prefetch" href="/assets/js/138.c094930d.js"><link rel="prefetch" href="/assets/js/139.a9e2cbcd.js"><link rel="prefetch" href="/assets/js/14.7a8ad4bd.js"><link rel="prefetch" href="/assets/js/140.bf6e4e6a.js"><link rel="prefetch" href="/assets/js/141.b6cabec2.js"><link rel="prefetch" href="/assets/js/142.dd4c6d7c.js"><link rel="prefetch" href="/assets/js/143.6ea6f7a6.js"><link rel="prefetch" href="/assets/js/144.65307785.js"><link rel="prefetch" href="/assets/js/145.2a9e641e.js"><link rel="prefetch" href="/assets/js/146.61ee5da0.js"><link rel="prefetch" href="/assets/js/147.c4d81026.js"><link rel="prefetch" href="/assets/js/148.e4f95d58.js"><link rel="prefetch" href="/assets/js/149.b904d701.js"><link rel="prefetch" href="/assets/js/15.ef3206c2.js"><link rel="prefetch" href="/assets/js/150.db100444.js"><link rel="prefetch" href="/assets/js/151.7c4871d7.js"><link rel="prefetch" href="/assets/js/152.daec42cb.js"><link rel="prefetch" href="/assets/js/153.0e2e26a4.js"><link rel="prefetch" href="/assets/js/154.b1ace3fb.js"><link rel="prefetch" href="/assets/js/155.ef8a1c8f.js"><link rel="prefetch" href="/assets/js/156.a5fd8779.js"><link rel="prefetch" href="/assets/js/157.b536bbee.js"><link rel="prefetch" href="/assets/js/158.75d82d5b.js"><link rel="prefetch" href="/assets/js/159.4a209a59.js"><link rel="prefetch" href="/assets/js/16.a8d4284c.js"><link rel="prefetch" href="/assets/js/160.0b3adc35.js"><link rel="prefetch" href="/assets/js/161.9a7e62d5.js"><link rel="prefetch" href="/assets/js/162.a6e5f565.js"><link rel="prefetch" href="/assets/js/163.ca687162.js"><link rel="prefetch" href="/assets/js/164.df453190.js"><link rel="prefetch" href="/assets/js/165.22cad993.js"><link rel="prefetch" href="/assets/js/166.3a5ab4e0.js"><link rel="prefetch" href="/assets/js/167.a768e87e.js"><link rel="prefetch" href="/assets/js/168.e28f9615.js"><link rel="prefetch" href="/assets/js/169.98e83c13.js"><link rel="prefetch" href="/assets/js/17.4c496ef5.js"><link rel="prefetch" href="/assets/js/170.8caf3b66.js"><link rel="prefetch" href="/assets/js/171.99120951.js"><link rel="prefetch" href="/assets/js/172.299fa75e.js"><link rel="prefetch" href="/assets/js/173.4b585278.js"><link rel="prefetch" href="/assets/js/174.5ac924a5.js"><link rel="prefetch" href="/assets/js/175.33878379.js"><link rel="prefetch" href="/assets/js/176.5855aa4d.js"><link rel="prefetch" href="/assets/js/177.abc2d5be.js"><link rel="prefetch" href="/assets/js/178.802e3784.js"><link rel="prefetch" href="/assets/js/179.ba4a65cf.js"><link rel="prefetch" href="/assets/js/18.74f5b65e.js"><link rel="prefetch" href="/assets/js/180.8e5e7e6f.js"><link rel="prefetch" href="/assets/js/181.819a68c7.js"><link rel="prefetch" href="/assets/js/182.8f1433ed.js"><link rel="prefetch" href="/assets/js/183.7a508871.js"><link rel="prefetch" href="/assets/js/184.4087e31b.js"><link rel="prefetch" href="/assets/js/185.73cac2ab.js"><link rel="prefetch" href="/assets/js/186.abde81d3.js"><link rel="prefetch" href="/assets/js/187.16e465f0.js"><link rel="prefetch" href="/assets/js/188.932c9f4a.js"><link rel="prefetch" href="/assets/js/189.e1fc9e75.js"><link rel="prefetch" href="/assets/js/19.1c8ab2a5.js"><link rel="prefetch" href="/assets/js/190.ca1e0af6.js"><link rel="prefetch" href="/assets/js/20.351ed211.js"><link rel="prefetch" href="/assets/js/21.e2ca7763.js"><link rel="prefetch" href="/assets/js/22.8db7a878.js"><link rel="prefetch" href="/assets/js/23.e51f5581.js"><link rel="prefetch" href="/assets/js/24.ee4d1ba6.js"><link rel="prefetch" href="/assets/js/25.95ab8947.js"><link rel="prefetch" href="/assets/js/26.10942abd.js"><link rel="prefetch" href="/assets/js/27.78f8142f.js"><link rel="prefetch" href="/assets/js/28.ab2474e2.js"><link rel="prefetch" href="/assets/js/29.c7d75f04.js"><link rel="prefetch" href="/assets/js/3.f5570fde.js"><link rel="prefetch" href="/assets/js/30.89a3cde3.js"><link rel="prefetch" href="/assets/js/31.a6e686fa.js"><link rel="prefetch" href="/assets/js/32.d21edd17.js"><link rel="prefetch" href="/assets/js/33.e1d544cc.js"><link rel="prefetch" href="/assets/js/34.f4808895.js"><link rel="prefetch" href="/assets/js/35.d5ac07cd.js"><link rel="prefetch" href="/assets/js/36.d269b434.js"><link rel="prefetch" href="/assets/js/37.87aea43e.js"><link rel="prefetch" href="/assets/js/38.0161b3f6.js"><link rel="prefetch" href="/assets/js/39.fc44419d.js"><link rel="prefetch" href="/assets/js/4.3d7e1167.js"><link rel="prefetch" href="/assets/js/40.95a1a6ca.js"><link rel="prefetch" href="/assets/js/41.ad0e816e.js"><link rel="prefetch" href="/assets/js/42.db3cfaf5.js"><link rel="prefetch" href="/assets/js/43.96deb88f.js"><link rel="prefetch" href="/assets/js/44.61e9b248.js"><link rel="prefetch" href="/assets/js/45.1de81233.js"><link rel="prefetch" href="/assets/js/46.88ffa560.js"><link rel="prefetch" href="/assets/js/47.bd65416f.js"><link rel="prefetch" href="/assets/js/48.1b749e99.js"><link rel="prefetch" href="/assets/js/49.b2828af6.js"><link rel="prefetch" href="/assets/js/5.515e517f.js"><link rel="prefetch" href="/assets/js/50.dd142e4a.js"><link rel="prefetch" href="/assets/js/51.82bfd76d.js"><link rel="prefetch" href="/assets/js/52.fc23351a.js"><link rel="prefetch" href="/assets/js/53.a05272d6.js"><link rel="prefetch" href="/assets/js/54.39280cee.js"><link rel="prefetch" href="/assets/js/55.56e40469.js"><link rel="prefetch" href="/assets/js/56.cae7d426.js"><link rel="prefetch" href="/assets/js/57.9b2b4098.js"><link rel="prefetch" href="/assets/js/58.834b8fb8.js"><link rel="prefetch" href="/assets/js/59.5c1e8a9d.js"><link rel="prefetch" href="/assets/js/6.921e6e44.js"><link rel="prefetch" href="/assets/js/60.200ade4b.js"><link rel="prefetch" href="/assets/js/61.9379836a.js"><link rel="prefetch" href="/assets/js/62.40848567.js"><link rel="prefetch" href="/assets/js/63.476bf996.js"><link rel="prefetch" href="/assets/js/64.17f96d11.js"><link rel="prefetch" href="/assets/js/65.8e272f26.js"><link rel="prefetch" href="/assets/js/66.10ad73cf.js"><link rel="prefetch" href="/assets/js/67.08e28c6a.js"><link rel="prefetch" href="/assets/js/68.583ec300.js"><link rel="prefetch" href="/assets/js/69.98dc4570.js"><link rel="prefetch" href="/assets/js/7.fffb9950.js"><link rel="prefetch" href="/assets/js/70.1ba9cf53.js"><link rel="prefetch" href="/assets/js/71.6a8123f1.js"><link rel="prefetch" href="/assets/js/72.9fe20ff1.js"><link rel="prefetch" href="/assets/js/73.c999b3b1.js"><link rel="prefetch" href="/assets/js/74.a3b8a6e7.js"><link rel="prefetch" href="/assets/js/75.24ed1d97.js"><link rel="prefetch" href="/assets/js/76.a32dbcc9.js"><link rel="prefetch" href="/assets/js/77.1107860d.js"><link rel="prefetch" href="/assets/js/78.ff9e7714.js"><link rel="prefetch" href="/assets/js/79.36bb309c.js"><link rel="prefetch" href="/assets/js/80.862d6b37.js"><link rel="prefetch" href="/assets/js/81.9fa6b600.js"><link rel="prefetch" href="/assets/js/82.b1ea3357.js"><link rel="prefetch" href="/assets/js/83.63ad8445.js"><link rel="prefetch" href="/assets/js/84.2c0eafa1.js"><link rel="prefetch" href="/assets/js/85.77177c5f.js"><link rel="prefetch" href="/assets/js/86.20d53700.js"><link rel="prefetch" href="/assets/js/87.b7fb94e6.js"><link rel="prefetch" href="/assets/js/88.a28049b4.js"><link rel="prefetch" href="/assets/js/89.e8d78858.js"><link rel="prefetch" href="/assets/js/90.a941f077.js"><link rel="prefetch" href="/assets/js/91.d1de1fed.js"><link rel="prefetch" href="/assets/js/92.42e2a443.js"><link rel="prefetch" href="/assets/js/93.552b2465.js"><link rel="prefetch" href="/assets/js/94.757ca009.js"><link rel="prefetch" href="/assets/js/95.c1845811.js"><link rel="prefetch" href="/assets/js/96.87ffdf35.js"><link rel="prefetch" href="/assets/js/97.24d7a901.js"><link rel="prefetch" href="/assets/js/98.f738b83a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d852a880.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a31c27c1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/icon.png" alt="Commercio.network Documentation" class="logo"> <span class="site-name can-hide">Commercio.network Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Versions" class="dropdown-title"><span class="title">Versions</span> <span class="arrow down"></span></button> <button type="button" aria-label="Versions" class="mobile-dropdown-title"><span class="title">Versions</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  ver 3.0.0
</a></li><li class="dropdown-item"><!----> <a href="/docs2.2.0/" class="nav-link router-link-active">
  ver 2.2.0
</a></li><li class="dropdown-item"><!----> <a href="/docs2.1.2/" class="nav-link">
  ver 2.1.2
</a></li></ul></div></div><div class="nav-item"><a href="https://commercio.network" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Site
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://discord.gg/N7DxaDj5sW" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://t.me/CommercioNetwork" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Telegram
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/commercionet?s=21&amp;t=8FTpg5f7kurZ1d7LOb9YXw" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/commercionetwork/commercionetwork" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Versions" class="dropdown-title"><span class="title">Versions</span> <span class="arrow down"></span></button> <button type="button" aria-label="Versions" class="mobile-dropdown-title"><span class="title">Versions</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  ver 3.0.0
</a></li><li class="dropdown-item"><!----> <a href="/docs2.2.0/" class="nav-link router-link-active">
  ver 2.2.0
</a></li><li class="dropdown-item"><!----> <a href="/docs2.1.2/" class="nav-link">
  ver 2.1.2
</a></li></ul></div></div><div class="nav-item"><a href="https://commercio.network" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Site
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://discord.gg/N7DxaDj5sW" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://t.me/CommercioNetwork" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Telegram
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://twitter.com/commercionet?s=21&amp;t=8FTpg5f7kurZ1d7LOb9YXw" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/commercionetwork/commercionetwork" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Overview</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Running Nodes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/nodes/" class="sidebar-link">Commercio.network overview</a></li><li><a href="/nodes/hardware-requirements.html" class="sidebar-link">Hardware requirements</a></li><li><a href="/nodes/full-node-installation.html" class="sidebar-link">Installing a full node</a></li><li><a href="/nodes/statesync-node-installation.html" class="sidebar-link">Installing a statesynced node</a></li><li><a href="/nodes/validator-node-installation.html" class="sidebar-link">Becoming a validator</a></li><li><a href="/nodes/validator-node-handling.html" class="sidebar-link">Handling a validator</a></li><li><a href="/nodes/validator-node-update.html" class="sidebar-link">Updating a validator</a></li><li><a href="/nodes/kms-installation.html" class="sidebar-link">KMS installation</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>API Developers</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/app_developers/commercioapi-introduction.html" class="sidebar-link">Introduction to CommercioAPI</a></li><li><a href="/app_developers/commercioapi-authentication.html" class="sidebar-link">Authentication process</a></li><li><a href="/app_developers/commercioapi-wallet.html" class="sidebar-link">eID</a></li><li><a href="/app_developers/commercioapi-ekyc.html" class="sidebar-link">eKyc</a></li><li><a href="/app_developers/commercioapi-sharedoc.html" class="sidebar-link">eDelivery</a></li><li><a href="/app_developers/commercioapi-esign.html" class="sidebar-link">eSign</a></li><li><a href="/app_developers/commercioapi-flow_examples.html" class="sidebar-link">Flows examples : Api usage</a></li><li><a href="/app_developers/commercioapi-surcharge.html" class="sidebar-link">Surcharge POST options</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/modules/" class="sidebar-heading clickable"><span>Custom Modules</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/modules/government/" class="sidebar-heading clickable open"><span>Government</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/modules/government/" class="sidebar-link">Concepts</a></li><li><a href="/modules/government/01_state.html" class="sidebar-link">State</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/modules/did/" class="sidebar-heading clickable"><span>Did</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/modules/documents/" class="sidebar-heading clickable"><span>Documents</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/modules/commerciomint/" class="sidebar-heading clickable"><span>CommercioMint</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/modules/commerciokyc/" class="sidebar-heading clickable"><span>CommercioKYC</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/modules/vbr/" class="sidebar-heading clickable"><span>Vbr</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ver 2.2.0</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs2.2.0/" aria-current="page" class="sidebar-link">ver 2.2.0</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Nodes</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs2.2.0/nodes/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/docs2.2.0/nodes/hardware-requirements.html" class="sidebar-link">Hardware requirements</a></li><li><a href="/docs2.2.0/nodes/full-node-installation.html" class="sidebar-link">Installing a full node</a></li><li><a href="/docs2.2.0/nodes/validator-node-installation.html" class="sidebar-link">Becoming a validator</a></li><li><a href="/docs2.2.0/nodes/validator-node-handling.html" class="sidebar-link">Handling a validator</a></li><li><a href="/docs2.2.0/nodes/validator-node-update.html" aria-current="page" class="active sidebar-link">Updating a validator</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#update-type-1-hard-fork" class="sidebar-link">Update type 1 - Hard fork</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#preliminary-risks" class="sidebar-link">Preliminary/Risks</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#install-support-software" class="sidebar-link">Install support software</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#setup-environment" class="sidebar-link">Setup environment</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#compile-new-executables" class="sidebar-link">Compile new executables</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#setup-height-to-stop-the-chain" class="sidebar-link">Setup height to stop the chain</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#control-if-chain-is-stopped" class="sidebar-link">Control if chain is stopped</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#stop-services" class="sidebar-link">Stop services</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#export-chain-state" class="sidebar-link">Export chain state</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#backup-executables" class="sidebar-link">Backup executables</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#changing-executables" class="sidebar-link">Changing executables</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#migrate-chain" class="sidebar-link">Migrate chain</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#check-hash-of-genesis" class="sidebar-link">Check hash of genesis</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#backup" class="sidebar-link">Backup</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#reset-chain-and-change-geneis-file" class="sidebar-link">Reset chain and change geneis file</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#restart-chain" class="sidebar-link">Restart chain</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#control-chain-restart" class="sidebar-link">Control chain restart</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#restart-the-rest-api-if-you-need" class="sidebar-link">Restart the REST API if you need</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#update-type-2-soft-fork" class="sidebar-link">Update type 2 - Soft fork</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#preliminary-risks-2" class="sidebar-link">Preliminary/Risks</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#setup-environment-2" class="sidebar-link">Setup environment</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#compile-new-executables-2" class="sidebar-link">Compile new executables</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#backup-executables-2" class="sidebar-link">Backup executables</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#restart-chain-changing-executables" class="sidebar-link">Restart chain changing executables</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#control-chain-restart-2" class="sidebar-link">Control chain restart</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#update-type-3-reset-reinstall-chain" class="sidebar-link">Update type 3 - Reset/reinstall chain</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#backup-executables-3" class="sidebar-link">Backup executables</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#backup-chain-database" class="sidebar-link">Backup chain database</a></li><li class="sidebar-sub-header"><a href="/docs2.2.0/nodes/validator-node-update.html#reinstall-node" class="sidebar-link">Reinstall node</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>App Developers</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>SDK Developers</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Modules</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ver 2.1.2</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="updating-a-validator"><a href="#updating-a-validator" class="header-anchor">#</a> Updating a validator</h1> <div class="custom-block danger"><p class="custom-block-title">DANGER</p> <p>If you are a new validator you need follow the <a href="/docs2.2.0/nodes/validator-node-installation.html"><em>&quot;Becoming a validator&quot;</em> procedure</a>.<br> <strong>DO NOT USE THIS UPDATE PROCEDURES</strong></p></div> <p>This section describes the procedure that needs to be followed in order to update a validator node from one
version to another.</p> <p>For updating will be sent to the validators the type and a brief explanation of the steps to be taken.<br>
This guide contains only a general basic explanation of the procedures to be applied.</p> <p>In general there are 3 types of updates</p> <ul><li>Update type <a href="#update-type-1-hard-fork"><code>1 - Hard fork</code></a></li> <li>Update type <a href="#update-type-2-soft-fork"><code>2 - Soft fork</code></a></li> <li>Update type <a href="#update-type-3-reset-reinstall-chain"><code>3 - Reset/reinstall chain</code></a></li></ul> <h2 id="update-type-1-hard-fork"><a href="#update-type-1-hard-fork" class="header-anchor">#</a> Update type 1 - Hard fork</h2> <p>In this case, the chain state will be preserved from its beginning to a certain point in time.</p> <h3 id="preliminary-risks"><a href="#preliminary-risks" class="header-anchor">#</a> Preliminary/Risks</h3> <p>When signalling a required update that should follow this procedure, the following information will
be let known to all validators:</p> <ol><li>A specific block height to stop chain: <code>&lt;stop_block_height&gt;</code></li> <li>The new chain software version: <code>&lt;new_version&gt;</code></li> <li>A deadline expressed in UTC format</li> <li>A new genesis_time in UTC format (something like 2020-06-12T08:55:00Z): <code>&lt;genesis_time&gt;</code></li> <li>The new chain_id: <code>&lt;new_chain_id&gt;</code></li> <li>The old chain_id: <code>&lt;old_chain_id&gt;</code></li></ol> <p>If you are a validator, please make sure that you know all those information before proceeding with the update.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>You should reach <a href="#setup-height-to-stop-the-chain">Setup height to stop the chain</a> point before update event.<br>
You prepare all settings as soon as you become aware of the update data</p></div> <div class="custom-block danger"><p class="custom-block-title">Double signing</p> <p>Due to the nature of the update operations, there is some risk of double signature.
To avoid every sort of risks please verify the software version, the hash of the <code>genesis.json</code> file and the specific
configuration present inside the <code>config.toml</code> file.</p></div> <div class="custom-block danger"><p class="custom-block-title">DANGER</p> <p>Update time<br>
The deadline of the update must be respected: every validator that will not update just in time will be slashed as offline node.</p></div> <h3 id="install-support-software"><a href="#install-support-software" class="header-anchor">#</a> Install support software</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> jq <span class="token parameter variable">-y</span>
</code></pre></div><h3 id="setup-environment"><a href="#setup-environment" class="header-anchor">#</a> Setup environment</h3> <p>Each validator has its own specific environment and therefore will have to modify the variables according to its setup.<br> <strong>The following setups are general guidelines</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">UPDATE_PROFILE</span><span class="token operator">=</span><span class="token string">&quot;<span class="token environment constant">$HOME</span>/.profile_update_cnd&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export HOME_CND=&quot;'</span><span class="token environment constant">$HOME</span><span class="token string">'/.cnd&quot;'</span> <span class="token operator">&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export HOME_CND_CONFIG=&quot;$HOME_CND/config&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export HOME_CND_DATA=&quot;$HOME_CND/data&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export HOME_CNCLI=&quot;'</span><span class="token environment constant">$HOME</span><span class="token string">'/.cncli&quot;'</span> <span class="token operator">&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export APP_TOML=&quot;$HOME_CND_CONFIG/app.toml&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export BIN_DIR=&quot;'</span><span class="token environment constant">$HOME</span><span class="token string">'/go/bin&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export SRC_GIT_DIR=&quot;'</span><span class="token environment constant">$HOME</span><span class="token string">'/commercionetwork&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export BUILD_DIR=&quot;$SRC_GIT_DIR/build&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export NEW_CHAIN_ID=&quot;&lt;new_chain_id&gt;&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export CHAIN_ID=&quot;&lt;old_chain_id&gt;&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export BUILD_VERSION=&quot;&lt;new_version&gt;&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export ALT_BLOCK=&lt;stop_block_height&gt;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export NEW_GENESIS_TIME=&quot;&lt;genesis_time&gt;&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>

<span class="token builtin class-name">source</span> <span class="token variable">$UPDATE_PROFILE</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;. <span class="token variable">$UPDATE_PROFILE</span>&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token environment constant">$HOME</span>/.profile
</code></pre></div><h3 id="compile-new-executables"><a href="#compile-new-executables" class="header-anchor">#</a> Compile new executables</h3> <p>In order to properly update your validator node, first of all you need to clone the
<a href="https://github.com/commercionetwork/commercionetwork" target="_blank" rel="noopener noreferrer"><code>commercionetwork</code> repo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/commercionetwork/commercionetwork.git <span class="token variable">$SRC_GIT_DIR</span>
</code></pre></div><p>Once downloaded, you need to compile the binaries with correct version:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable">$SRC_GIT_DIR</span>
<span class="token function">git</span> pull
<span class="token function">git</span> checkout <span class="token variable">$BUILD_VERSION</span>
<span class="token function">git</span> pull
<span class="token function">make</span> build
</code></pre></div><p>Verify your version</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./build/cnd version
</code></pre></div><p>should be the same value of <code>&lt;new_version&gt;</code></p> <h3 id="setup-height-to-stop-the-chain"><a href="#setup-height-to-stop-the-chain" class="header-anchor">#</a> Setup height to stop the chain</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;s|halt-height = .*|halt-height = <span class="token variable">$ALT_BLOCK</span>|g&quot;</span> <span class="token punctuation">\</span>
  <span class="token variable">$APP_TOML</span> <span class="token operator">&gt;</span> <span class="token variable">$APP_TOML</span>.tmp
<span class="token function">mv</span> <span class="token variable">$APP_TOML</span>.tmp <span class="token variable">$APP_TOML</span>
<span class="token function">sudo</span> <span class="token function">service</span> cnd restart
</code></pre></div><h3 id="control-if-chain-is-stopped"><a href="#control-if-chain-is-stopped" class="header-anchor">#</a> Control if chain is stopped</h3> <p>After the block <code>&lt;stop_block_height&gt;</code> a chain stop message should appear at the indicated block.
To verify that the chain is actually locked check with reading the logs</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> journalctl <span class="token parameter variable">-u</span> cnd <span class="token parameter variable">-f</span>
</code></pre></div><h3 id="stop-services"><a href="#stop-services" class="header-anchor">#</a> Stop services</h3> <p>Make sure you have stopped services and export the chain</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl stop cnd
<span class="token function">sudo</span> systemctl stop cncli <span class="token comment"># if you running rest server</span>
<span class="token function">sudo</span> <span class="token function">pkill</span> cnd
<span class="token function">sudo</span> <span class="token function">pkill</span> cncli
</code></pre></div><p>and control it reading the logs</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> journalctl <span class="token parameter variable">-u</span> cnd <span class="token parameter variable">-f</span>
</code></pre></div><h3 id="export-chain-state"><a href="#export-chain-state" class="header-anchor">#</a> Export chain state</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>cnd <span class="token builtin class-name">export</span> --for-zero-height <span class="token operator">&gt;</span> <span class="token environment constant">$HOME</span>/export_for_<span class="token variable">$NEW_CHAIN_ID</span>.json
</code></pre></div><h3 id="backup-executables"><a href="#backup-executables" class="header-anchor">#</a> Backup executables</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">$BIN_DIR</span>/cnd <span class="token variable">$BIN_DIR</span>/cnd.back
<span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">$BIN_DIR</span>/cncli <span class="token variable">$BIN_DIR</span>/cncli.back
</code></pre></div><h3 id="changing-executables"><a href="#changing-executables" class="header-anchor">#</a> Changing executables</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cp</span> <span class="token variable">$BUILD_DIR</span>/cn* <span class="token variable">$BIN_DIR</span>/.
</code></pre></div><h3 id="migrate-chain"><a href="#migrate-chain" class="header-anchor">#</a> Migrate chain</h3> <p>Try to find out migrate version from list of current migration</p> <div class="language-bash extra-class"><pre class="language-bash"><code>cnd migrations-list 
</code></pre></div><p>If you find <code>&lt;new_version&gt;</code> in the ouput command you ca use the follow command</p> <div class="language-bash extra-class"><pre class="language-bash"><code>cnd migrate <span class="token punctuation">\</span>
  <span class="token variable">$BUILD_VERSION</span> <span class="token punctuation">\</span>
  <span class="token environment constant">$HOME</span>/export_for_<span class="token variable">$NEW_CHAIN_ID</span>.json <span class="token punctuation">\</span>
  --chain-id <span class="token variable">$NEW_CHAIN_ID</span> <span class="token punctuation">\</span>     
  --genesis-time <span class="token variable">$NEW_GENESIS_TIME</span> <span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  <span class="token environment constant">$HOME</span>/genesis_for_<span class="token variable">$NEW_CHAIN_ID</span>.json
  
</code></pre></div><p>If you don't find <code>&lt;new_version&gt;</code> in the valid migrations list use</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token environment constant">$HOME</span>/export_for_<span class="token variable">$NEW_CHAIN_ID</span>.json <span class="token operator">|</span> <span class="token punctuation">\</span>
  jq <span class="token string">'.genesis_time=&quot;'</span><span class="token variable">$NEW_GENESIS_TIME</span><span class="token string">'&quot;'</span> <span class="token operator">|</span> <span class="token punctuation">\</span>
  jq <span class="token string">'.chain_id=&quot;'</span><span class="token variable">$NEW_CHAIN_ID</span><span class="token string">'&quot;'</span> <span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  <span class="token environment constant">$HOME</span>/genesis_for_<span class="token variable">$NEW_CHAIN_ID</span>.json
</code></pre></div><h3 id="check-hash-of-genesis"><a href="#check-hash-of-genesis" class="header-anchor">#</a> Check hash of genesis</h3> <p>To confirm that all validator nodes have produced the same genesis, a comparison must be made between all update participants to demonstrate the consistency of the data.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>jq <span class="token parameter variable">-S</span> <span class="token parameter variable">-c</span> <span class="token parameter variable">-M</span> <span class="token string">''</span> <span class="token environment constant">$HOME</span>/genesis_for_<span class="token variable">$NEW_CHAIN_ID</span>.json <span class="token operator">|</span> shasum <span class="token parameter variable">-a</span> <span class="token number">256</span>
</code></pre></div><p>Compare the value of the hash obtained with all other participants in the update</p> <h3 id="backup"><a href="#backup" class="header-anchor">#</a> Backup</h3> <p>Before starting the update it is recommended to take a full data snapshot of the chain state at the export height.<br>
To do so please run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl stop cnd
systemctl stop cncli <span class="token comment"># if you running rest server</span>
<span class="token function">mkdir</span> <span class="token variable">$HOME_CND</span><span class="token builtin class-name">.</span><span class="token variable">$CHAIN_ID</span>
<span class="token function">mv</span> <span class="token variable">$HOME_CND_DATA</span> <span class="token variable">$HOME_CND</span><span class="token builtin class-name">.</span><span class="token variable">$CHAIN_ID</span>/.
<span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">$HOME_CND_CONFIG</span> <span class="token variable">$HOME_CND</span><span class="token builtin class-name">.</span><span class="token variable">$CHAIN_ID</span>/.
<span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">$HOME_CNCLI</span> <span class="token variable">$HOME_CNCLI</span><span class="token builtin class-name">.</span><span class="token variable">$CHAIN_ID</span>
</code></pre></div><h3 id="reset-chain-and-change-geneis-file"><a href="#reset-chain-and-change-geneis-file" class="header-anchor">#</a> Reset chain and change geneis file</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>cnd unsafe-reset-all
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cp</span> <span class="token environment constant">$HOME</span>/genesis_for_<span class="token variable">$NEW_CHAIN_ID</span>.json <span class="token variable">$HOME_CND_CONFIG</span>/genesis.json
</code></pre></div><h3 id="restart-chain"><a href="#restart-chain" class="header-anchor">#</a> Restart chain</h3> <p>Before restarting the chain we have to reset the value for height for the stop to zero.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;s|halt-height = .*|halt-height = 0|g&quot;</span> <span class="token punctuation">\</span>
  <span class="token variable">$APP_TOML</span> <span class="token operator">&gt;</span> <span class="token variable">$APP_TOML</span>.tmp
<span class="token function">mv</span> <span class="token variable">$APP_TOML</span>.tmp <span class="token variable">$APP_TOML</span>
systemctl start cnd
</code></pre></div><h3 id="control-chain-restart"><a href="#control-chain-restart" class="header-anchor">#</a> Control chain restart</h3> <p>The new chain should restart at the time set in the <code>genesis_time</code>.<br>
Control if the sync starts. Use <code>Ctrl + C</code> to interrupt the <code>journalctl</code> command</p> <div class="language-bash extra-class"><pre class="language-bash"><code>journalctl <span class="token parameter variable">-u</span> cnd <span class="token parameter variable">-f</span>
<span class="token comment"># OUTPUT SHOULD BE LIKE BELOW AFTER GENESI TIME</span>
<span class="token comment">#</span>
<span class="token comment"># Aug 13 16:30:20 commerciotestnet-node4 cnd[351]: I[2019-08-13|16:30:20.722] Executed block                               module=state height=1 validTxs=0 invalidTxs=0</span>
<span class="token comment"># Aug 13 16:30:20 commerciotestnet-node4 cnd[351]: I[2019-08-13|16:30:20.728] Committed state                              module=state height=1 txs=0 appHash=9815044185EB222CE9084AA467A156DFE6B4A0B1BAAC6751DE86BB31C83C4B08</span>
<span class="token comment"># Aug 13 16:30:20 commerciotestnet-node4 cnd[351]: I[2019-08-13|16:30:20.745] Executed block                               module=state height=2 validTxs=0 invalidTxs=0</span>
<span class="token comment"># Aug 13 16:30:20 commerciotestnet-node4 cnd[351]: I[2019-08-13|16:30:20.751] Committed state                              module=state height=2 txs=0 appHash=96BFD9C8714A79193A7913E5F091470691B195E1E6F028BC46D6B1423F7508A5</span>
<span class="token comment"># Aug 13 16:30:20 commerciotestnet-node4 cnd[351]: I[2019-08-13|16:30:20.771] Executed block                               module=state height=3 validTxs=0 invalidTxs=0</span>
</code></pre></div><h3 id="restart-the-rest-api-if-you-need"><a href="#restart-the-rest-api-if-you-need" class="header-anchor">#</a> Restart the REST API if you need</h3> <div class="language- extra-class"><pre class="language-text"><code>cncli config chain-id $NEW_CHAIN_ID
cncli rest-server --chain-id $NEW_CHAIN_ID --trust-node
</code></pre></div><h2 id="update-type-2-soft-fork"><a href="#update-type-2-soft-fork" class="header-anchor">#</a> Update type 2 - Soft fork</h2> <p>This type of upgrade is generally optional: it is released to fix some minor bugs in the software and does not change the status of the chain</p> <h3 id="preliminary-risks-2"><a href="#preliminary-risks-2" class="header-anchor">#</a> Preliminary/Risks</h3> <p>When signalling a optional update that should follow this procedure, the following information will
be let known to all validators:</p> <ol><li>The new chain software version: <code>&lt;new_version&gt;</code></li></ol> <p>If you are a validator, please make sure that you know all those information before proceeding with the update.</p> <h3 id="setup-environment-2"><a href="#setup-environment-2" class="header-anchor">#</a> Setup environment</h3> <p>Each validator has its own specific environment and therefore will have to modify the variables according to its setup.<br> <strong>The following setups are general guidelines</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">UPDATE_PROFILE</span><span class="token operator">=</span><span class="token string">&quot;<span class="token environment constant">$HOME</span>/.profile_update_cnd&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export HOME_CND=&quot;'</span><span class="token environment constant">$HOME</span><span class="token string">'/.cnd&quot;'</span> <span class="token operator">&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export HOME_CND_CONFIG=&quot;$HOME_CND/config&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export HOME_CND_DATA=&quot;$HOME_CND/data&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export BIN_DIR=&quot;'</span><span class="token environment constant">$HOME</span><span class="token string">'/go/bin&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export SRC_GIT_DIR=&quot;'</span><span class="token environment constant">$HOME</span><span class="token string">'/commercionetwork&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export BUILD_DIR=&quot;$SRC_GIT_DIR/build&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export BUILD_VERSION=&quot;&lt;new_version&gt;&quot;'</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$UPDATE_PROFILE</span>

<span class="token builtin class-name">source</span> <span class="token variable">$UPDATE_PROFILE</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;. <span class="token variable">$UPDATE_PROFILE</span>&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token environment constant">$HOME</span>/.profile
</code></pre></div><h3 id="compile-new-executables-2"><a href="#compile-new-executables-2" class="header-anchor">#</a> Compile new executables</h3> <p>In order to properly update your validator node, first of all you need to clone the
<a href="https://github.com/commercionetwork/commercionetwork" target="_blank" rel="noopener noreferrer"><code>commercionetwork</code> repo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/commercionetwork/commercionetwork.git <span class="token variable">$SRC_GIT_DIR</span>
</code></pre></div><p>Once downloaded, you need to compile the binaries with correct version:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable">$SRC_GIT_DIR</span>
<span class="token function">git</span> pull
<span class="token function">git</span> checkout <span class="token variable">$BUILD_VERSION</span>
<span class="token function">git</span> pull
<span class="token function">make</span> build
</code></pre></div><p>Verify your version</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./build/cnd version
</code></pre></div><p>should be the same value of <code>&lt;new_version&gt;</code></p> <h3 id="backup-executables-2"><a href="#backup-executables-2" class="header-anchor">#</a> Backup executables</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">$BIN_DIR</span>/cnd <span class="token variable">$BIN_DIR</span>/cnd.back
<span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">$BIN_DIR</span>/cncli <span class="token variable">$BIN_DIR</span>/cncli.back
</code></pre></div><h3 id="restart-chain-changing-executables"><a href="#restart-chain-changing-executables" class="header-anchor">#</a> Restart chain changing executables</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl stop cnd
<span class="token function">sudo</span> systemctl stop cncli
<span class="token function">cp</span> <span class="token variable">$BUILD_DIR</span>/cn* <span class="token variable">$BIN_DIR</span>/.
<span class="token function">sudo</span> systemctl start cnd
<span class="token function">sudo</span> systemctl start cncli

</code></pre></div><h3 id="control-chain-restart-2"><a href="#control-chain-restart-2" class="header-anchor">#</a> Control chain restart</h3> <p>The new chain should restart at the time set in the <code>genesis_time</code>.<br>
Control if the sync starts. Use <code>Ctrl + C</code> to interrupt the <code>journalctl</code> command</p> <div class="language-bash extra-class"><pre class="language-bash"><code>journalctl <span class="token parameter variable">-u</span> cnd <span class="token parameter variable">-f</span>
<span class="token comment"># OUTPUT SHOULD BE LIKE BELOW AFTER GENESI TIME</span>
<span class="token comment">#</span>
<span class="token comment"># Aug 13 16:30:20 commerciotestnet-node4 cnd[351]: I[2019-08-13|16:30:20.722] Executed block                               module=state height=1 validTxs=0 invalidTxs=0</span>
<span class="token comment"># Aug 13 16:30:20 commerciotestnet-node4 cnd[351]: I[2019-08-13|16:30:20.728] Committed state                              module=state height=1 txs=0 appHash=9815044185EB222CE9084AA467A156DFE6B4A0B1BAAC6751DE86BB31C83C4B08</span>
<span class="token comment"># Aug 13 16:30:20 commerciotestnet-node4 cnd[351]: I[2019-08-13|16:30:20.745] Executed block                               module=state height=2 validTxs=0 invalidTxs=0</span>
<span class="token comment"># Aug 13 16:30:20 commerciotestnet-node4 cnd[351]: I[2019-08-13|16:30:20.751] Committed state                              module=state height=2 txs=0 appHash=96BFD9C8714A79193A7913E5F091470691B195E1E6F028BC46D6B1423F7508A5</span>
<span class="token comment"># Aug 13 16:30:20 commerciotestnet-node4 cnd[351]: I[2019-08-13|16:30:20.771] Executed block                               module=state height=3 validTxs=0 invalidTxs=0</span>
</code></pre></div><h2 id="update-type-3-reset-reinstall-chain"><a href="#update-type-3-reset-reinstall-chain" class="header-anchor">#</a> Update type 3 - Reset/reinstall chain</h2> <p>This procedure is very rare and is only performed in borderline cases.<br>
With this process the chain is completely reinitialized and a new genesis is produced by the chain management system.<br>
Usually this procedure is applied on development and test chains.</p> <h3 id="backup-executables-3"><a href="#backup-executables-3" class="header-anchor">#</a> Backup executables</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">$BIN_DIR</span>/cnd <span class="token variable">$BIN_DIR</span>/cnd.back
<span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">$BIN_DIR</span>/cncli <span class="token variable">$BIN_DIR</span>/cncli.back
</code></pre></div><h3 id="backup-chain-database"><a href="#backup-chain-database" class="header-anchor">#</a> Backup chain database</h3> <p>Before starting the update it is recommended to take a full data snapshot of the chain state at the export height.<br>
To do so please run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl stop cnd
systemctl stop cncli <span class="token comment"># if you running rest server</span>
<span class="token function">mkdir</span> <span class="token variable">$HOME_CND</span><span class="token builtin class-name">.</span><span class="token variable">$CHAIN_ID</span>
<span class="token function">mv</span> <span class="token variable">$HOME_CND_DATA</span> <span class="token variable">$HOME_CND</span><span class="token builtin class-name">.</span><span class="token variable">$CHAIN_ID</span>/.
<span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">$HOME_CND_CONFIG</span> <span class="token variable">$HOME_CND</span><span class="token builtin class-name">.</span><span class="token variable">$CHAIN_ID</span>/.
<span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">$HOME_CNCLI</span> <span class="token variable">$HOME_CNCLI</span><span class="token builtin class-name">.</span><span class="token variable">$CHAIN_ID</span>
</code></pre></div><h3 id="reinstall-node"><a href="#reinstall-node" class="header-anchor">#</a> Reinstall node</h3> <p>Follow all steps in <a href="/docs2.2.0/nodes/full-node-installation.html">Installing a full node</a><br>
Follow all steps in <a href="/docs2.2.0/nodes/validator-node-installation.html">Becoming a validator</a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/commercionetwork/commercionetwork/edit/master/docs/docs2.2.0/nodes/validator-node-update.md" target="_blank" rel="noopener noreferrer">Edit this page on Github</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/15/2024, 11:28:54 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs2.2.0/nodes/validator-node-handling.html" class="prev">
        Handling a validator
      </a></span> <span class="next"><a href="/docs2.2.0/app_developers/">
        Introduction
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.25897520.js" defer></script><script src="/assets/js/2.ac32ef9e.js" defer></script><script src="/assets/js/1.da52573b.js" defer></script><script src="/assets/js/99.d7dbcd46.js" defer></script>
  </body>
</html>
